{% extends "pandoratradingsolution/ms_base.html" %}

{% load predict_tags %}
{% load static %}

{% block title %} Прогнозы {% endblock %}

{% block content %}

      <header class="ms-hero-page ms-hero-bg-info ms-hero-img-airplane mb-4">
        <div class="container">
          <div class="text-center">
            <h1 class="color-warning mb-4 animated fadeInDown animation-delay-4">Таблица прогнозов</h1>
            <p class="lead lead-xl mw-800 center-block color-medium mb-2 animated fadeInDown animation-delay-4"> Текущие прогнозы цен <span class="colorStar">по торговым инструментам</span>. <br> Используй <span class="colorStar animation-delay-10">торговые возможности</span> по максимуму. </p>
          </div>
        </div>
      </header>
      <div class="container">
        <div class="row pricing-table-container">

            {% if page_obj %}

            <div class="card card-primary table-responsive style="width:100%"">
                    <div class="card-header table-responsive">
                        <h3 class="card-title">Прогнозы</h3>
                    </div>
                    <table class="table table-striped table-hover" style="width:100%">
                        <thead>
                            <tr class="">
                                <td><center><b>Тикер</b></center></td>
                                {% if user.is_authenticated %}
                                    <td><center><b>1w</b></center></td>
                                    <td><center><b>2w</b></center></td>
                                {% endif %}
                                <td><center><b>1m</b></center></td>
                                <td><center><b>3m</b></center></td>
                                <td><center><b>6m</b></center></td>
                                <td><center><b>1y</b></center></td>
                            </tr>
                        </thead>
                        <tbody>
                            {% for prediction in page_obj %}
                            <tr>
                                <td class="color-primary">{{ prediction.ticker.full_name }} ({{ prediction.ticker }})</td>
                                {% if user.is_authenticated %}
                                    <td><div class="row col-xs-4 color-primary"><span class="mr-2 ms-icon-sm ms-icon-circle ms-icon-inverse color-primary"><i class="zmdi zmdi-calendar"></i></span>{{ prediction.1w.created|predictiondate:prediction.1w.horizon.lag|date:"d-m-Y" }}</div><br>
                                        <div class="row col-xs-4 {{ prediction.1w.prctChange|price_color }}"><span class="mr-2 ms-icon-sm ms-icon-circle ms-icon-inverse {{ prediction.1w.prctChange|price_color }}"><i class="{{ prediction.1w.prctChange|icon_type }}"></i></span>{{ prediction.1w.predictprice|predictionprice:prediction.1w.prctChange }}</div><br>
                                        <div class="row col-xs-4 color-info"><span class="mr-2 ms-icon-sm ms-icon-circle ms-icon-inverse color-info"><i class="zmdi zmdi-info"></i></span>{{ prediction.1w.probability|predictionproba}}</div></td>
                                    <td><div class="row col-xs-4 color-primary"><span class="mr-2 ms-icon-sm ms-icon-circle ms-icon-inverse color-primary"><i class="zmdi zmdi-calendar"></i></span>{{ prediction.2w.created|predictiondate:prediction.2w.horizon.lag|date:"d-m-Y" }}</div><br>
                                        <div class="row col-xs-4 {{ prediction.2w.prctChange|price_color }}"><span class="mr-2 ms-icon-sm ms-icon-circle ms-icon-inverse {{ prediction.2w.prctChange|price_color }}"><i class="{{ prediction.2w.prctChange|icon_type }}"></i></span>{{ prediction.2w.predictprice|predictionprice:prediction.2w.prctChange }}</div><br>
                                        <div class="row col-xs-4 color-info"><span class="mr-2 ms-icon-sm ms-icon-circle ms-icon-inverse color-info"><i class="zmdi zmdi-info"></i></span>{{ prediction.2w.probability|predictionproba}}</div></td>
                                {% endif %}
                                <td><div class="row col-xs-4 color-primary"><span class="mr-2 ms-icon-sm ms-icon-circle ms-icon-inverse color-primary"><i class="zmdi zmdi-calendar"></i></span>{{ prediction.1m.created|predictiondate:prediction.1m.horizon.lag|date:"d-m-Y" }}</div><br>
                                    <div class="row col-xs-4 {{ prediction.1m.prctChange|price_color }}"><span class="mr-2 ms-icon-sm ms-icon-circle ms-icon-inverse {{ prediction.1m.prctChange|price_color }}"><i class="{{ prediction.1m.prctChange|icon_type }}"></i></span>{{ prediction.1m.predictprice|predictionprice:prediction.1m.prctChange }}</div><br>
                                    <div class="row col-xs-4 color-info"><span class="mr-2 ms-icon-sm ms-icon-circle ms-icon-inverse color-info"><i class="zmdi zmdi-info"></i></span>{{ prediction.1m.probability|predictionproba}}</div></td>
                                <td><div class="row col-xs-4 color-primary"><span class="mr-2 ms-icon-sm ms-icon-circle ms-icon-inverse color-primary"><i class="zmdi zmdi-calendar"></i></span>{{ prediction.3m.created|predictiondate:prediction.3m.horizon.lag|date:"d-m-Y" }}</div><br>
                                    <div class="row col-xs-4 {{ prediction.3m.prctChange|price_color }}"><span class="mr-2 ms-icon-sm ms-icon-circle ms-icon-inverse {{ prediction.3m.prctChange|price_color }}"><i class="{{ prediction.3m.prctChange|icon_type }}"></i></span>{{ prediction.3m.predictprice|predictionprice:prediction.3m.prctChange }}</div><br>
                                    <div class="row col-xs-4 color-info"><span class="mr-2 ms-icon-sm ms-icon-circle ms-icon-inverse color-info"><i class="zmdi zmdi-info"></i></span>{{ prediction.3m.probability|predictionproba}}</div></td>
                                <td><div class="row col-xs-4 color-primary"><span class="mr-2 ms-icon-sm ms-icon-circle ms-icon-inverse color-primary"><i class="zmdi zmdi-calendar"></i></span>{{ prediction.6m.created|predictiondate:prediction.6m.horizon.lag|date:"d-m-Y" }}</div><br>
                                    <div class="row col-xs-4 {{ prediction.6m.prctChange|price_color }}"><span class="mr-2 ms-icon-sm ms-icon-circle ms-icon-inverse {{ prediction.6m.prctChange|price_color }}"><i class="{{ prediction.6m.prctChange|icon_type }}"></i></span>{{ prediction.6m.predictprice|predictionprice:prediction.6m.prctChange }}</div><br>
                                    <div class="row col-xs-4 color-info"><span class="mr-2 ms-icon-sm ms-icon-circle ms-icon-inverse color-info"><i class="zmdi zmdi-info"></i></span>{{ prediction.6m.probability|predictionproba}}</div></td>
                                <td><div class="row col-xs-4 color-primary"><span class="mr-2 ms-icon-sm ms-icon-circle ms-icon-inverse color-primary"><i class="zmdi zmdi-calendar"></i></span>{{ prediction.1y.created|predictiondate:prediction.1y.horizon.lag|date:"d-m-Y" }}</div><br>
                                    <div class="row col-xs-4 {{ prediction.1y.prctChange|price_color }}"><span class="mr-2 ms-icon-sm ms-icon-circle ms-icon-inverse {{ prediction.1y.prctChange|price_color }}"><i class="{{ prediction.1y.prctChange|icon_type }}"></i></span>{{ prediction.1y.predictprice|predictionprice:prediction.1y.prctChange }}</div><br>
                                    <div class="row col-xs-4 color-info"><span class="mr-2 ms-icon-sm ms-icon-circle ms-icon-inverse color-info"><i class="zmdi zmdi-info"></i></span>{{ prediction.1y.probability|predictionproba}}</div></td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>


            <!--
            <div class="pagination">
                <span class="step-links">
                    {% if page_obj.has_previous %}
                        <a href="?page=1">&laquo; первая</a>
                        <a href="?page={{ page_obj.previous_page_number }}">предыдущая</a>
                    {% endif %}

                    <span class="current">
                        Страница {{ page_obj.number }} из {{ page_obj.paginator.num_pages }}
                    </span>

                    {% if page_obj.has_next %}
                        <a href="?page={{ page_obj.next_page_number }}">следующая</a>
                        <a href="?page={{ page_obj.paginator.num_pages }}">последняя &raquo;</a>
                    {% endif %}
                </span>
            </div> -->

            <nav aria-label="...">
                <ul class="pager pager-flat d-flex justify-content-between">
                    {% if page_obj.has_previous %}
                    <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}"><span aria-hidden="true">«</span> предыдущая</a></li>
                    {% endif %}
                    {% if page_obj.has_next %}
                    <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">следующая <span aria-hidden="true">»</span></a></li>
                    {% endif %}
                </ul>
            </nav>
            {% else %}
                <p>Нет прогнозов, удовлетворяющих условиям отбора</p>
            {% endif %}

        </div> <!-- row -->
      </div> <!-- container -->


{% endblock %}