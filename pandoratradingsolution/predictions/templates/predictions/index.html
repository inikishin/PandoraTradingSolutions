{% extends "pandoratradingsolution/base.html" %}

{% load predict_tags %}
{% load static %}

{% block title %} Прогнозы {% endblock %}

{% block content %}

{% if page_obj %}
    <table>
        <thead>
            <tr>
                <td>Тикер</td>
                {% if user.is_authenticated %}
                    <td width="140px">1w</td>
                    <td width="140px">2w</td>
                {% endif %}
                <td width="140px">1m</td>
                <td width="140px">3m</td>
                <td width="140px">6m</td>
                <td width="140px">1y</td>
            </tr>
        </thead>
        <tbody>
            {% for prediction in page_obj %}
            <tr>
                <td>{{ prediction.ticker }}</td>
                {% if user.is_authenticated %}
                    <td>{{ prediction.1w.created|predictiondate:prediction.1w.horizon.lag|date:"d-m-Y" }}<br>
                        {{ prediction.1w.predictprice|predictionprice:prediction.1w.prctChange }}<br>
                        {{ prediction.1w.probability|predictionproba}}</td>
                    <td>{{ prediction.2w.created|predictiondate:prediction.2w.horizon.lag|date:"d-m-Y" }}<br>
                        {{ prediction.2w.predictprice|predictionprice:prediction.2w.prctChange }}<br>
                        {{ prediction.2w.probability|predictionproba}}</td>
                {% endif %}
                <td>{{ prediction.1m.created|predictiondate:prediction.1m.horizon.lag|date:"d-m-Y" }}<br>
                    {{ prediction.1m.predictprice|predictionprice:prediction.1m.prctChange }}<br>
                    {{ prediction.1m.probability|predictionproba}}</td>
                <td>{{ prediction.3m.created|predictiondate:prediction.3m.horizon.lag|date:"d-m-Y" }}<br>
                    {{ prediction.3m.predictprice|predictionprice:prediction.3m.prctChange }}<br>
                    {{ prediction.3m.probability|predictionproba}}</td>
                <td>{{ prediction.6m.created|predictiondate:prediction.6m.horizon.lag|date:"d-m-Y" }}<br>
                    {{ prediction.6m.predictprice|predictionprice:prediction.6m.prctChange }}<br>
                    {{ prediction.6m.probability|predictionproba}}</td>
                <td>{{ prediction.1y.created|predictiondate:prediction.1y.horizon.lag|date:"d-m-Y" }}<br>
                    {{ prediction.1y.predictprice|predictionprice:prediction.1y.prctChange }}<br>
                    {{ prediction.1y.probability|predictionproba}}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>Нет прогнозов, удовлетворяющих условиям отбора</p>
{% endif %}

    <br>
    <div class="pagination">
        <span class="step-links">
            {% if page_obj.has_previous %}
                <a href="?page=1">&laquo; первая</a>
                <a href="?page={{ page_obj.previous_page_number }}">предыдущая</a>
            {% endif %}

            <span class="current">
                Страница {{ page_obj.number }} из {{ page_obj.paginator.num_pages }}
            </span>

            {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}">следующая</a>
                <a href="?page={{ page_obj.paginator.num_pages }}">последняя &raquo;</a>
            {% endif %}
        </span>
    </div>
    <br>

<div>
    <h6>ПРЕДУПРЕЖДЕНИЕ: Операции на российских и международных рынках содержат в себе высокий уровень риска. Администрация сайта
    pandoratradingsolutions.ru напоминает вам, что данные, предоставленные на данном сайте, не
    обязательно даны в режиме реального времени и могут не являться точными. Все цены на акции, индексы, фьючерсы носят
    ориентировочный характер и на них нельзя полагаться при торговле. Таким образом, администрация сайта
    pandoratradingsolutions.ru не несет никакой ответственности за любые убытки, которые вы можете понести в результате
    использования информации, содержащейся на этом сайте, котировок, графиков и сигналов.<br><br></h6>
</div>

{% endblock %}